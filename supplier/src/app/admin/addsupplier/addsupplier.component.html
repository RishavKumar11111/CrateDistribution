
    <section>
        <div class="container-fluid">
            <br>
                <div class="card" *ngIf="!showAreaOfOperationDiv">
                    <div class="card-header bg-primary">
                        <h4 class="text-white">Enter Supplier details</h4>
                    </div>
                    <div class="card-body">
                            <form [formGroup]="supplierForm" #supplierFormId>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label for="workOrderNo">Work-order number <span class="asterisk-mark">*</span>:</label>
                                            <input type="text" class="form-control" id="workOrderNo" name="workOrderNo" (keyup)="checkWorkOrderExistance()"
                                                placeholder="Enter work-order number of supplier" formControlName='workOrderNo'>
                                                <span class='alert alert-danger' *ngIf='isDuplicateWONo'> 
                                                    <span >This work-order number already exist.</span>
                                                </span>
                                                <div *ngIf="workOrderNo.invalid && (workOrderNo.dirty || workOrderNo.touched)" class="alert alert-danger">
                                                    <div *ngIf="workOrderNo.errors.required">
                                                        Work-order number is required.
                                                    </div>
                                                </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="itemQuantity">Item quantity <span class="asterisk-mark">*</span>:</label>
                                            <input type="number" class="form-control" id="itemQuantity" name="itemQuantity"
                                                placeholder="Enter crate quantity " formControlName='itemQuantity'>
                                                
                                                <div *ngIf="itemQuantity.invalid && (itemQuantity.dirty || itemQuantity.touched)" class="alert alert-danger">
                                                    <div *ngIf="itemQuantity.errors.required">
                                                        Minimum quantity is required.
                                                    </div>
                                                </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label for="firmName">Firm name <span class="asterisk-mark">*</span>:</label>
                                            <input type="text" class="form-control" id="firmName" placeholder="Enter firm name of supplier"
                                                formControlName='firmName'>

                                                <div *ngIf="firmName.invalid && (firmName.dirty || firmName.touched)" class="alert alert-danger">
                                                    <div *ngIf="firmName.errors.required">
                                                        Firm name is required.
                                                    </div>
                                                </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="emailId"> Email <span class="asterisk-mark">*</span>:</label>
                                            <input type="email" class="form-control" id="emailId" placeholder="Enter email-id of supplier" formControlName='emailId'>
                                                <div *ngIf="emailId.invalid && (emailId.dirty || emailId.touched)" class="alert alert-danger">
                                                    <div *ngIf="emailId.errors.required">
                                                        Email-ID is required.
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label for="panNo">PAN number <span class="asterisk-mark">*</span>:</label>
                                            <input id="panNo" class="form-control" type="text" placeholder="Enter pan number of supplier"
                                                                formControlName="panNo" required >
                                                            <div *ngIf="panNo.invalid && (panNo.dirty || panNo.touched)" class="alert alert-danger">
                                                                    <div *ngIf="panNo.errors.required">
                                                                        PAN number is required.
                                                                    </div>
                                                                    <div *ngIf="panNo.errors.pattern">
                                                                        PAN number must be numeric value.
                                                                    </div>
                                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="mobileNo">Mobile number <span class="asterisk-mark">*</span>:</label>
                                            <input type="text" class="form-control" id="mobileNo" placeholder="Enter mobile number of supplier" formControlName='mobileNo'>
                                                <div *ngIf="mobileNo.invalid && (mobileNo.dirty || mobileNo.touched)" class="alert alert-danger">
                                                    <div *ngIf="mobileNo.errors.required">
                                                        Mobile number is required.
                                                    </div>
                                                    <div *ngIf="mobileNo.errors.pattern">
                                                        Mobile number must be numeric value.
                                                    </div>
                                                    <div *ngIf="mobileNo.errors.minlength">
                                                        Mobile number must be at least 10 characters long.
                                                    </div>
                                                    <div *ngIf="mobileNo.errors.maxlength">
                                                        Mobile number must be at least 10 characters long.
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <label for="GSTN"> GSTN <span class="asterisk-mark">*</span>:</label>
                                            <input type="text" class="form-control" id="GSTN" placeholder="Enter GSTN of supplier"
                                                formControlName='GSTN'>
                                                <div *ngIf="GSTN.invalid && (GSTN.dirty || GSTN.touched)" class="alert alert-danger">
                                                    <div *ngIf="GSTN.errors.required">
                                                        GSTN number is required.
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                            </form>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-primary float-right" mat-raised-button type="button" (click)="next();"> Next <i class="fas fa-arrow-right" aria-hidden="true"></i></button>
                    </div>
                </div>
                <div class="card" *ngIf="showAreaOfOperationDiv">
                    <div class="card-header bg-primary">
                        <h4 class="text-white">Add area of operation</h4>
                    </div>
                    <div class="card-body">
                            <div class="row">
                                        <div class="col-lg-6">
                                                <label for="district">District <span class="asterisk-mark">*</span>:</label>
                                                <select class="form-control" id="district" (change)="loadBlock();" [(ngModel)]="selectedDistrict" [ngModelOptions]="{standalone: true}" required>
                                                    <option value="" disabled selected>--Select--</option>
                                                    <option *ngFor="let x of districtList" [ngValue]="x">{{ x.districtName }}
                                                    </option>
                                                </select>
                                        </div>
                                        <div class="col-lg-2">
                                        </div>
                                        <div class="col-lg-4">
                                                <!-- <label for="searchBlockName">Search :</label>
                                                <input class="form-control" id="searchBlockName" (keyup)="applyBlockListFilter($event)" placeholder="Filter" #blockInput> -->
                                        </div>
                            </div>
                            <br><br>
                            <div class="card" *ngIf="selectedDistrict">
                                <div class="card-header bg-primary">
                                    <h4 class="text-white">Select blocks for area of operation</h4>
                                </div>
                                <div class="card-body table-card">
                                        <div class="mat-elevation-z8">
                                            <table mat-table [dataSource]="blockList" matSort>
                                                <ng-container matColumnDef="slNo">
                                                        <th mat-header-cell *matHeaderCellDef> SL.</th>
                                                        <td mat-cell *matCellDef="let element; let i = index;"> 
                                                            {{ (paginatorRef.pageIndex * paginatorRef.pageSize) + (i + 1) }}
                                                        </td>
                                                        <td mat-footer-cell *matFooterCellDef></td>
                                                </ng-container>
                                                <ng-container matColumnDef="blockCode">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Block code </th>
                                                        <td mat-cell *matCellDef="let element"> {{ element.blockCode }} </td>
                                                        <td mat-footer-cell *matFooterCellDef></td>
                                                </ng-container>
                                                <ng-container matColumnDef="blockName">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Block name </th>
                                                        <td mat-cell *matCellDef="let element"> {{element.blockName}} </td>
                                                        <td mat-footer-cell *matFooterCellDef></td>
                                                </ng-container>
                                                <ng-container matColumnDef="select">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 130px;"> Select </th>
                                                        <td mat-cell *matCellDef="let element">
                                                            <input type="checkbox" class="form-control" [(ngModel)]="element.isChecked" [ngModelOptions]="{standalone: true}" (change)="selectAssignedBlock(element);">
                                                        </td>
                                                        <td mat-footer-cell *matFooterCellDef>
                                                            <button mat-raised-button class="btn btn-primary" (click)="assignDistrict();" type="button"><i class="fas fa-plus" aria-hidden="true"></i> Add district</button>
                                                        </td>
                                                </ng-container>
                                                <tr mat-header-row *matHeaderRowDef="blockListColumns"></tr>
                                                <tr mat-row *matRowDef="let row; columns: blockListColumns;"></tr>
                                                <tr mat-footer-row *matFooterRowDef="blockListColumns"></tr>
                                                <tr class="mat-row" *matNoDataRow>
                                                    <!-- <td class="mat-cell" colspan="4" style="color: red;font-weight: bold;">No data matching the filter "{{blockInput.value}}"</td> -->
                                                  </tr>
                                            </table>
                                            <mat-paginator #paginatorRef [pageSizeOptions]="[5, 10, 25]"></mat-paginator>
                                        </div>
                                </div>
                            </div>

                            <div class="card" *ngIf="showAreaOfOperationDiv">
                                <div class="card-header bg-primary">
                                    <h4 class="text-white float-left">Areas of operation</h4>
                                    <input class="float-right search-box form-control" (keyup)="applyAOOListFilter($event)" matInput placeholder="Filter" #aooInput>
                                </div>
                                <div class="card-body table-card mat-elevation-z8">
                                                    <div class="text-center" *ngIf="supplierForm.value.areaOfOperation.length === 0" style="padding: 30px;">
                                                        <strong style="color: red;font-size: large;padding: 10px;">Districts are not added</strong>
                                                    </div>
                                                    <div *ngIf="supplierForm.value.areaOfOperation.length !== 0">
                                                        <table mat-table [dataSource]="areaOfOperationList">
                                                            <ng-container matColumnDef="slNo">
                                                                    <th mat-header-cell *matHeaderCellDef> SL.</th>
                                                                    <td mat-cell *matCellDef="let element; let i = index;"> 
                                                                        {{ (paginatorRefAOF.pageIndex * paginatorRefAOF.pageSize) + (i + 1) }}
                                                                    </td>
                                                            </ng-container>
                                                            <ng-container matColumnDef="district">
                                                                    <th mat-header-cell *matHeaderCellDef> District </th>
                                                                    <td mat-cell *matCellDef="let element"> {{ element.districtName }} </td>
                                                            </ng-container>
                                                            <ng-container matColumnDef="block">
                                                                    <th mat-header-cell *matHeaderCellDef> Block </th>
                                                                    <td mat-cell *matCellDef="let element"> {{element.blockName}} </td>
                                                            </ng-container>
                                                            <ng-container matColumnDef="remove">
                                                                    <th mat-header-cell *matHeaderCellDef style="width: 130px;"> Remove </th>
                                                                    <td mat-cell *matCellDef="let element; let i = index;">
                                                                        <button mat-raised-button class="btn btn-outline-danger" (click)="removeAreaOfOperation(i)">
                                                                            <i class="fas fa-trash" aria-hidden="true"></i>
                                                                        </button>
                                                                    </td>
                                                            </ng-container>
                                                            <tr mat-header-row *matHeaderRowDef="aooListColumns"></tr>
                                                            <tr mat-row *matRowDef="let row; columns: aooListColumns;"></tr>
                                                            <tr class="mat-row" *matNoDataRow>
                                                                <td class="mat-cell" colspan="4" style="color: red;font-weight: bold;">No data matching the filter "{{aooInput.value}}"</td>
                                                            </tr>
                                                        </table>
                                                        <mat-paginator #paginatorRefAOF [pageSizeOptions]="[5, 10, 25]"></mat-paginator>
                                                </div>                        
                                </div>
                            </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-primary float-left" (click)="back();" mat-raised-button > <i class="fas fa-arrow-left" aria-hidden="true"></i> Previous</button>
                        <button class="btn btn-primary float-right" type="submit" (click)="onSubmit()" mat-raised-button > Create Supplier</button>
                    </div>
                </div>
            <br>
        </div>
    </section>